# Implementation Plan: Expense Tracker Launch Page

**Branch**: `001-setup-expense-dashboard` | **Date**: 2025-10-23 | **Spec**: specs/001-setup-expense-dashboard/spec.md
**Input**: Feature specification from `/specs/001-setup-expense-dashboard/spec.md`

**Note**: This plan follows the `/speckit.plan` workflow and aligns with the v1.0.0 constitution.

## Summary

Deliver a single-page SvelteKit experience that lets users enter transactions, review them in a responsive table, and view KPI cards plus lightweight charts. UI will lean on shadcn-svelte primitives skinned with Tailwind using `@theme` tokens for a dark-first palette. Data remains in-memory for now, but structures will be modular to swap in Firebase persistence later. date-fns will power period calculations and formatting.

## Technical Context

<!--
  ACTION REQUIRED: Replace the content in this section with the technical details
  for the project. The structure here is presented in advisory capacity to guide
  the iteration process.
-->

**Language/Version**: SvelteKit `^2.43.2`, Svelte `^5.39.5`, TypeScript `^5.9.x`
**Primary Dependencies**: Tailwind CSS `^4.1.13`, shadcn-svelte CLI, date-fns `^3.x`, Vite `^7.1.7`
**Storage**: In-memory Svelte store (clears on reload); structure ready for future Firebase persistence layer
**Verification**: Manual walkthroughs only (per constitution), covering desktop, tablet, and mobile viewports
**Target Platform**: Responsive web (320px–1440px+)
**Project Type**: Single SvelteKit application page with supporting lib components
**Performance Goals**: KPI/table recalculation <2s for 200 entries; perceived UI actions <100ms
**Constraints**: Dark-mode via `@theme` tokens, shadcn-svelte for core UI, charts built without new heavy deps, no persistent storage yet, manual QA only
**Scale/Scope**: One dashboard page containing form, table, KPI cards, charts, plus reusable stores/utils supporting future Firebase integration

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

- **Clean Code & Readability**: Build modular Svelte components (`FormPanel`, `EntriesTable`, `KpiGroup`, `TrendCharts`) under `src/lib`, enforce lint/format scripts, and avoid lingering Firebase stubs until persistence work begins.
- **Simple UX Flows**: Keep the form + KPI cards in the first viewport, limit fields to essentials, and avoid modal dialogs—charts/tooltips remain inline.
- **Responsive Across Viewports**: Validate layouts at 320px, 768px, and 1440px; collapse chart grid vertically under 768px; keep table headers sticky with graceful horizontal scroll when needed.
- **Minimal Dependency Footprint**: Only add shadcn-svelte (per requirement) and date-fns; implement charts with custom SVG components to avoid heavier libraries; document Firebase integration as future work.
- **Manual Confidence Over Automation**: Provide PR checklist steps covering form submission, filter combinations, KPI totals, and chart hover states across desktop/mobile; no automated tests introduced.

## Project Structure

### Documentation (this feature)

```text
specs/001-setup-expense-dashboard/
├── plan.md
├── research.md
├── data-model.md
├── quickstart.md
├── contracts/
│   └── openapi.yaml
└── tasks.md             # to be generated by /speckit.tasks
```

### Source Code (repository root)
<!-- Provide the concrete SvelteKit structure for this feature. Update the tree with real folders/files. -->

```text
src/
├── lib/
│   ├── components/
│   │   ├── form/
│   │   │   └── TransactionForm.svelte
│   │   ├── table/
│   │   │   └── EntriesTable.svelte
│   │   ├── kpi/
│   │   │   └── KpiCard.svelte
│   │   └── charts/
│   │       ├── TrendChart.svelte
│   │       └── CategoryDonut.svelte
│   ├── stores/
│   │   └── transactions.ts
│   └── utils/
│       ├── filters.ts
│       └── theme.ts
├── routes/
│   ├── +layout.svelte
│   └── +page.svelte
├── app.d.ts
├── app.postcss        # defines @theme tokens + Tailwind layers
└── lib/types.ts

static/
└── images/
    └── dashboard-placeholder.png (optional demo asset)

tailwind.config.ts
vite.config.ts
svelte.config.js
```

**Structure Decision**: Single-page dashboard under root `+page.svelte` with shared lib components and stores to keep presentation and state management isolated. `app.postcss` hosts `@theme` tokens consumed by Tailwind; additional assets live under `static/images` for potential marketing shots.

## Complexity Tracking

> **Fill ONLY if Constitution Check has violations that must be justified**

| Violation | Why Needed | Simpler Alternative Rejected Because |
|-----------|------------|-------------------------------------|
| _None_ | — | — |

## Phase Plan

### Phase 0 – Research & Tooling Spike
- Document shadcn-svelte setup steps and identify required component imports (button, card, table, select, dialog).
- Prototype `@theme` tokens in `app.postcss` and confirm Tailwind can reference them via CSS variables.
- Evaluate date-fns helpers for presets (`startOfMonth`, `endOfMonth`, `subMonths`, etc.) and confirm tree-shakable imports.
- Outline manual chart rendering approach (SVG/Canvas decision → SVG confirmed in research.md).

### Phase 1 – Design & Data Modeling
- Finalize TypeScript types in `src/lib/types.ts` mirroring `TransactionEntry`, `PeriodFilter`, and `KPIBundle`.
- Draft `transactions` store API (add/remove/filter) that currently persists in memory but isolates logic for future Firebase integration.
- Define theming utilities (`theme.ts`) to expose CSS variable helpers for shadcn tokens.
- Author quickstart instructions and ensure documentation matches actual scripts.

### Phase 2 – Implementation & Manual QA
- Build layout skeleton in `+page.svelte`, wiring shadcn primitives for layout sections.
- Implement `TransactionForm` with validation and submission into the transactions store using date-fns formatting.
- Create `EntriesTable` with period filter controls and row styling derived from categories.
- Implement KPI cards and custom charts leveraging computed store getters; ensure `@theme` colors drive gradients/segments.
- Populate manual QA checklist results (screenshots, totals) before marking the feature complete.

### Manual Validation Plan
- Desktop 1440px: End-to-end runthrough verifying form submission, KPIs, charts, responsiveness of table.
- Tablet 768px: Confirm layout stacking, filter usability, charts remain readable.
- Mobile 375px: Validate form fields are accessible, table scroll behavior acceptable, KPI cards stack vertically.
- Refresh to confirm session-only storage, noting expected reset behavior for reviewers.

## Dependencies & Risks
- **shadcn-svelte CLI**: Adds generation step; mitigate by documenting components used and avoiding unused imports.
- **date-fns**: Keep to direct function imports to benefit from tree-shaking; monitor bundle size with `pnpm build --analyze` before release.
- **Manual charts**: Requires careful accessibility (aria labels, descriptive text). Allocate buffer for iterative polish.
- **Future Firebase**: Ensure stores emit events that can later be connected to async operations without rewriting UI components.

## Future Considerations
- Introduce Firebase Firestore integration when persistence is prioritized; API contract already outlines endpoints.
- Add user-defined subcategories stored in Firestore collections; UI should read from config once available.
- Consider exporting/importing CSV once persistence is stable.
